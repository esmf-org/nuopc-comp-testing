name: NUOPC Component Testing Action
author: Ufuk Turuncoglu (ESMF/CGD/NCAR)
description: Tests given earth system model component in a isolated way forced by data component
inputs:
  dependencies:
    description: list of packages to install
    required: false
    default: ''

runs:
  using: "composite"
  steps:
    # checkout base repository
    - name: Checkout Component Repository
      uses: actions/checkout@v3

    # create environment with dependencies
    - name: Install Dependencies 
      id: install-deps
      run: |
        ls -al $GITHUB_ACTION_PATH
        find $GITHUB_ACTION_PATH/. -name "*.sh"
        echo "${{ inputs.dependencies }}"
        echo "${{ inputs.dependencies }}" | tr " " ","
        $GITHUB_ACTION_PATH/scripts/install_deps.sh \
        -d $(echo "${{ inputs.dependencies }}" | tr " " ",") \
        -i $HOME 
        -r $GITHUB_WORKSPACE
      shell: bash
