name: NUOPC Component Testing Action
author: Ufuk Turuncoglu (ESMF/CGD/NCAR)
description: Tests given earth system model component in a isolated way forced by data component
inputs:
  dependencies:
    description: list of packages to install
    required: false
    default: ''

#outputs:
#  version:
#    description: actual version installed
#    value: ${{ steps.install-deps.outputs.version }}

runs:
  using: "composite"
  steps:
    # checkout base repository
    - name: Checkout Component Repository
      uses: actions/checkout@v3

    # create environment with dependencies
    - name: Install Dependencies 
      id: install-deps
      run: |
        $GITHUB_ACTION_PATH/scripts/install_deps.sh \
        -d $(echo "${{ inputs.dependencies }}" | awk '$1=$1' RS= OFS=,) \
        -i $HOME \ 
        -r $GITHUB_WORKSPACE
      shell: bash

